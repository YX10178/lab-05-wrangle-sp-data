---
title: "Lab 05 - La Quinta is Spanish for next to Denny's, Pt. 2"
author: "Yuxin Xie"
date: "2/13/2025"
output: github_document
---

# install.packages("devtools")
#devtools::install_github("rstudio-education/dsbox")

### Load packages and data

```{r load-packages, message = FALSE}

library(tidyverse) 
library(dsbox) 
```

```{r load-data, message = FALSE}
states <- read_csv("data/states.csv")
dn <- dsbox::dennys
lq <- dsbox::laquinta
```

### Exercise 1
```{r How many Denny’s locations are there in Alaska}
dn_ak <- dn %>%
  filter(state == "AK")
nrow(dn_ak)
## There are 3 Denny’s locations in Alaska.

lq_ak <- lq %>%
  filter(state == "AK")
nrow(lq_ak)
## There are 2 La Quinta locations in Alaska.
```

### Exercise 2
```{r pairings}
## There are 6 pairings we need to calculate 
```

### Exercise 3
```{r join}
#?full_join
dn_lq_ak <- full_join(dn_ak, lq_ak, 
                      by = "state")
dn_lq_ak
```

### Exercise 4
```{r observations}
## there are 6 observations in the joined dn_lq_ak data frame. There are 11 variabels. 
```

### Exercise 5
```{r distances}
##One way of calculating the distance between any two points on the earth is to use the Haversine distance formula. This formula takes into account the fact that the earth is not flat, but instead spherical.
## This function is not available in R, but we can save the following function to a file called haversine.R that we can load and then use:

haversine <- function(long1, lat1, long2, lat2, round = 3) {
  # convert to radians
  long1 <- long1 * pi / 180
  lat1 <- lat1 * pi / 180
  long2 <- long2 * pi / 180
  lat2 <- lat2 * pi / 180

  R <- 6371 # Earth mean radius in km

  a <- sin((lat2 - lat1) / 2)^2 + cos(lat1) * cos(lat2) * sin((long2 - long1) / 2)^2
  d <- R * 2 * asin(sqrt(a))

  return(round(d, round)) # distance in km
}


```

### Exercise 6
```{r calculate the distances}
dn_lq_ak <- dn_lq_ak %>%
  mutate (distance = haversine (longitude.x, latitude.x, longitude.y,  latitude.y, round =3))

print (dn_lq_ak$distance)
```

### Exercise 7
```{r minimum distance between a Denny’s and La Quinta for each Denny’s location}
dn_lq_ak_mindist <- dn_lq_ak %>%
  group_by(address.x) %>%
  summarize(closest = min(distance))
```

### Exercise 8
```{r }

```

### Exercise 9
```{r }

```

### Exercise 10
```{r }

```


### Exercise 11
```{r }

```


### Exercise 12
```{r }

```


